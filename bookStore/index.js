
var books =
    [
        {

            "The Power of Habit": "https://www.google.com.eg/books/edition/The_Power_of_Habit/c12idXqsE5cC?hl=en&gbpv=1&pg=PR4&printsec=frontcover"
            ,

            "Philosophical Explanations": "https://www.google.com.eg/books/edition/Philosophical_Explanations/N4zH86WogYwC?hl=en&gbpv=1&pg=PA1&printsec=frontcover"

            ,
            "On Collective Memory": "https://www.google.com.eg/books/edition/On_Collective_Memory/GPhGukFWC84C?hl=en&gbpv=1&pg=PP5&printsec=frontcover"

            ,
            "Nonviolent Communication: A Language of Life": "https://www.google.com.eg/books/edition/Nonviolent_Communication_A_Language_of_L/A3qACgAAQBAJ?hl=en&gbpv=1&pg=PT11&printsec=frontcover"

            ,
            "Handbook of Intelligence": "https://www.google.com.eg/books/edition/Handbook_of_Intelligence/YnBGMpIMfJ0C?hl=en&gbpv=1&pg=PR3&printsec=frontcover"

            ,
            "Altered Traits": "https://www.google.com.eg/books/edition/Altered_Traits/e8IPDgAAQBAJ?hl=en&gbpv=1&pg=PP5&printsec=frontcover"

            ,
            "Black Rednecks and White Liberals": "https://www.google.com.eg/books/edition/Black_Rednecks_and_White_Liberals/JMxpBOnQIH8C?hl=en&gbpv=1&dq=Black+Rednecks+and+White+Liberals&printsec=frontcover"

            ,
            "The Culture Code": "https://www.google.com.eg/books/edition/The_Culture_Code/YkcyCwAAQBAJ?hl=en&gbpv=1&pg=PT3&printsec=frontcover"

            ,
            "The Foundations of Psychoanalysis": "https://www.google.com.eg/books/edition/The_Foundations_of_Psychoanalysis/M6IwDwAAQBAJ?hl=en&gbpv=1&printsec=frontcover"

            ,
            "Looking for Spinoza": "https://www.google.com.eg/books/edition/Looking_for_Spinoza/JJY4RjBC758C?hl=en&gbpv=1&pg=PT7&printsec=frontcover"

            ,
            "The Perfect Wife": "https://www.scribd.com/document/440402878/The-Perfect-Wife-by-JP-Delaney"

            ,
            "The Plague": "https://ratical.org/PandemicParallaxView/ThePlague-Camus.pdf"

            ,
            "Ready Player Two": "https://www.google.com.eg/books/edition/Ready_Player_Two/Vn3tDwAAQBAJ?hl=en&gbpv=1&pg=PT5&printsec=frontcover"
            ,

            "Agamemnon's Daughter": "https://www.google.com.eg/books/edition/Agamemnon_s_Daughter/XBR1EAAAQBAJ?hl=en&gbpv=1&pg=PT7&printsec=frontcover"

            ,
            "Future Shock": "https://www.google.com.eg/books/edition/Future_Shock/CVNSEAAAQBAJ?hl=en&gbpv=1&pg=PP7&printsec=frontcover"

            ,
            "Journey to the Center of the Earth": "https://www.google.com.eg/books/edition/Journey_to_the_Centre_of_the_Earth/BnFeq4eZcesC?hl=en&gbpv=1&dq=Journey+to+the+Center+of+the+Earth&printsec=frontcover"

            ,
            "Bag of Bones": "https://www.google.com.eg/books/edition/Bag_of_Bones/PBPGSj0u4egC?hl=en&gbpv=1&dq=Bag+of+Bones&printsec=frontcover"
            ,

            "For Whom the Bell Tolls": "https://www.google.com.eg/books/edition/For_Whom_the_Bell_Tolls/TdVQAQAAQBAJ?hl=en&gbpv=1&dq=For+Whom+the+Bell+Tolls&printsec=frontcover"

            ,
            "Growth of the Soil": "https://www.google.com.eg/books/edition/Soil_Conditions_and_Plant_Growth/rPGf0Irn--8C?hl=en&gbpv=1&dq=Growth+of+the+Soil&printsec=frontcover"
            ,

            "Solaris": "https://www.google.com.eg/books/edition/Solaris_10_System_Administration_Exam_Pr/Jlb_ePeDGlAC?hl=en&gbpv=1&dq=Solaris&pg=PA1&printsec=frontcover"

            ,
            "ملخص كتاب سحر الواقع": "https://www.google.com.eg/books/edition/%D9%85%D9%84%D8%AE%D8%B5_%D9%83%D8%AA%D8%A7%D8%A8_%D8%B3%D8%AD%D8%B1_%D8%A7%D9%84%D9%88%D8%A7%D9%82%D8%B9/TPLpEAAAQBAJ?hl=en&gbpv=1&dq=%D9%85%D9%84%D8%AE%D8%B5+%D9%83%D8%AA%D8%A7%D8%A8+%D8%B3%D8%AD%D8%B1+%D8%A7%D9%84%D9%88%D8%A7%D9%82%D8%B9&pg=PA5&printsec=frontcover"
            ,

            "ملخص كتاب صناعة الشر": "https://www.google.com.eg/books/edition/%D9%85%D9%84%D8%AE%D8%B5_%D9%83%D8%AA%D8%A7%D8%A8_%D8%B5%D9%86%D8%A7%D8%B9%D8%A9_%D8%A7%D9%84%D8%B4%D8%B1/4nfbEAAAQBAJ?hl=en&gbpv=1&dq=%D9%85%D9%84%D8%AE%D8%B5+%D9%83%D8%AA%D8%A7%D8%A8+%D8%B5%D9%86%D8%A7%D8%B9%D8%A9+%D8%A7%D9%84%D8%B4%D8%B1&pg=PA12&printsec=frontcover"

            ,
            "The Formation and Transmission of Western Legal Culture": "https://www.google.com.eg/books/edition/The_Formation_and_Transmission_of_Wester/7r2iDQAAQBAJ?hl=en&gbpv=1&dq=The+Formation+and+Transmission+of+Western+Legal+Culture&printsec=frontcover"
            ,

            "Phenomenology of Spirit": "https://www.google.com.eg/books/edition/Phenomenology_of_Spirit/xOnhG9tidGsC?hl=en&gbpv=1&dq=Phenomenology+of+Spirit&printsec=frontcover"

            ,
            "Thus Spoke Zarathustra": "https://www.google.com.eg/books/edition/Thus_Spoke_Zarathustra/a9VxKgui0mEC?hl=en&gbpv=1&dq=Thus+Spoke+Zarathustra&printsec=frontcover"

            ,
            "A Treatise of Human Nature": "https://www.google.com.eg/books/edition/A_Treatise_of_Human_Nature/LYTzDwAAQBAJ?hl=en&gbpv=1&dq=A+Treatise+of+Human+Nature&printsec=frontcover"

            ,
            "After Virtue": "https://www.google.com.eg/books/edition/After_Virtue/4pUFDgAAQBAJ?hl=en&gbpv=1&pg=PT6&printsec=frontcover"

            ,
            "Lives of the Eminent Philosophers": "https://www.google.com.eg/books/edition/The_Lives_and_Opinions_of_Eminent_Philos/O9rWatB8iQMC?hl=en&gbpv=1&pg=PA1&printsec=frontcover"

            ,
            "Knowledge and Human Interests": "https://hugoribeiro.com.br/area-restrita/Habermas-knowledge-and-human-interests.pdf"

            ,

            "The Universe in a Nutshell": "https://docs.google.com/file/d/0B7lZ7JU-iHeBczhZdmVkOEk4U2s/edit?resourcekey=0-UTXw8XYGuUCs9oK4iBe4LA"

            ,
            "The Myth of Disenchantment": "https://www.google.com.eg/books/edition/The_Myth_of_Disenchantment/xZ5yDgAAQBAJ?hl=en&gbpv=1&pg=PR3&printsec=frontcover"

            ,
            "Einstein": "https://www.google.com.eg/books/edition/The_World_As_I_See_It/aNKOo94tO6cC?hl=en&gbpv=1&pg=PA1&printsec=frontcover"

            ,

            "Galaxy Morphology and Classification": "https://www.google.com.eg/books/edition/Galaxy_Morphology_and_Classification/geEVkpueEPcC?hl=en&gbpv=1&dq=Galaxy+Morphology+and+Classification&printsec=frontcover"
            ,

            "Quaternary Extinctions": "https://www.google.com.eg/books/edition/Quaternary_Extinctions/SNlVEAAAQBAJ?hl=en&gbpv=1&dq=Quaternary+Extinctions&printsec=frontcover"

            ,
            "Quantum Theory": "https://www.google.com.eg/books/edition/Quantum_Theory/hEHCAgAAQBAJ?hl=en&gbpv=1&dq=Quantum+Theory&printsec=frontcover"
            ,

            "The Music of the Primes": "https://www.google.com.eg/books/edition/The_Music_of_the_Primes_Why_an_unsolved/p8ECL3GScZoC?hl=en&gbpv=1&dq=the+music+of+the+primes+book+pdf&printsec=frontcover"

            ,
            "Darwin Among The Machines": "https://www.google.com.eg/books/edition/Darwin_Among_the_Machines/NY7GlDGToRIC?hl=en&gbpv=1&pg=PA1&printsec=frontcover"
            ,

            "Metamorphoses": "https://www.google.com.eg/books/edition/Ovid_s_Metamorphoses/boVKAAAAYAAJ?hl=en&gbpv=1&pg=PP7&printsec=frontcover"
            ,

            "The Flowers of Evil": "https://web.seducoahuila.gob.mx/biblioweb/upload/the_flowers_of_evil.pdf"

            ,
            "The Riverside Chaucer": "https://www.google.com.eg/books/edition/The_Riverside_Chaucer/E4DXD7Sk7WcC?hl=en&gbpv=1&printsec=frontcover"
            ,

            "The Book of Dede Korkut": "https://www.google.com.eg/books/edition/The_Book_of_Dede_Korkut/bR5YNB7CXSIC?hl=en&gbpv=1&pg=PA1&printsec=frontcover"

            ,
            "The Iliad": "https://www.google.com.eg/books/edition/Iliad/gekYAAAAYAAJ?hl=en&gbpv=1&pg=PA1&printsec=frontcover"

            ,
            "The Book of Images": "https://www.google.com.eg/books/edition/The_Book_of_Images/djVkAwAAQBAJ?hl=en&gbpv=1&pg=PA4&printsec=frontcover"
            ,

            "The Metamorphoses of Publius Ovidius Naso": "https://www.google.com.eg/books/edition/Ovid_s_Metamorphoses/boVKAAAAYAAJ?hl=en&gbpv=1&pg=PA7&printsec=frontcover"
        }
    ]


const transformedBooks = Object.entries(books[0]).map(([title, url]) => {
    return { title, url };
});

console.log(transformedBooks);

console.log(transformedBooks);


console.log(books);

console.log(transformedBooks);

console.log(transformedBooks.length);
console.log(transformedBooks[0].url);
console.log(`"${transformedBooks[0].url}"`); // Logs URL in double quotes




var arrTitles = [];

getbooks("Psychology");
function getbooks(categoryName) {

    document.getElementById('container').innerHTML = '';
    var request = new XMLHttpRequest();
    request.open('GET', 'https://www.googleapis.com/books/v1/volumes?q=subject:' + categoryName);
    request.send();
    request.onreadystatechange = function () {
        if (request.readyState == 4) {
            console.log(JSON.parse(request.responseText).items);
            var response = JSON.parse(request.responseText).items;
            console.log(typeof response);



            for (var i = 0; i < response.length; i++) {
                addCard(response[i].volumeInfo);
                arrTitles.push(response[i].volumeInfo.title);
            }
        }

        






    }

}





function addCard(response) {

    var card = document.createElement('div');
    document.getElementById('container').append(card);
    var img = document.createElement('img');
    card.append(img);

    var h = document.createElement('h3');
    card.append(h);

    var p = document.createElement('p');
    card.append(p);

    var button = document.createElement('button');
    card.append(button);

    img.src = response.imageLinks.smallThumbnail;

    button.innerHTML = "READ NOW";

    for (let i = 0; i < transformedBooks.length; i++) {


        if (response.title === transformedBooks[i].title) {
            button.addEventListener('click', function () {
                // Open the link in a new tab
                window.open(`${transformedBooks[i].url}' `, '_blank');

            });
        }
    }


    // if (response.title === transformedBooks[i].title) {
    //     button.addEventListener('click', function () {
    //         // Open the link in a new tab
    //         window.open(`'${transformedBooks[i].url}' `, '_blank');

    //     });
    // }




    h.textContent = response.authors;
    p.textContent = response.title;


    // console.log(response.title);
    console.log(response.authors);

}




function searchbox() {
    categoryName = document.getElementById('search').value;
    document.getElementById('container').innerHTML = '';
    var request = new XMLHttpRequest();
    request.open('GET', 'https://www.googleapis.com/books/v1/volumes?q=subject:' + categoryName);
    request.send();
    request.onreadystatechange = function () {
        if (request.readyState == 4) {
            console.log(JSON.parse(request.responseText).items);
            var response = JSON.parse(request.responseText).items;
            console.log(typeof response);



            for (var i = 0; i < response.length; i++) {
                addCard(response[i].volumeInfo);

            }
        }






    }

}


function search() {
    searchbox();
    var searchbox = document.getElementById('search');
    var nameOfButton = document.getElementsByTagName('button');
    for (var i = 0; i < nameOfButton.length; i++) {

        if (nameOfButton[i].innerHTML.toLocaleLowerCase().includes(searchbox.value.toLocaleLowerCase())) {
            nameOfButton[i].style.display = 'block';
        } else {
            nameOfButton[i].style.display = 'none';

        }


    }



}



/*

// Get the menu icon and dropdown elements
const menuIcon = document.getElementById('menuIcon');
const dropdownMenu = document.getElementById('dropdownMenu');

// Add click event listener to the menu icon
menuIcon.addEventListener('click', function() {
    // Toggle the display of the dropdown
    if (dropdownMenu.style.display === 'none' || dropdownMenu.style.display === '') {
        dropdownMenu.style.display = 'block';  // Show the dropdown
       
    } else {
        dropdownMenu.style.display = 'none';   // Hide the dropdown
        
    }
});



document.addEventListener("click", function() {
    if (dropdownMenu.style.display === 'block') {
        dropdownMenu.style.display = "none"; // Hide the dropdown
    }
});


*/
///////////////////////////////


// Toggle dropdown menu when menuIcon is clicked
menuIcon.addEventListener('click', function(event) {
    event.stopPropagation(); // Prevent the click event from propagating to the document
    if (dropdownMenu.style.display === 'none' || dropdownMenu.style.display === '') {
        dropdownMenu.style.display = 'block'; // Show the dropdown
        dropdownMenu.style.transition = "2s"
        

    } else {
        dropdownMenu.style.display = 'none'; // Hide the dropdown
    }
});

// Hide dropdown menu when clicking anywhere else on the document
document.addEventListener("click", function() {
    if (dropdownMenu.style.display === 'block') {
        dropdownMenu.style.display = 'none'; // Hide the dropdown
    }
});







